<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paweł RNG - Gra</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 0;
  }

  h1 {
    margin-top: 30px;
    font-size: 2em;
  }

  #rollButton, #muteButton {
    padding: 15px 30px;
    font-size: 1.2em;
    margin: 10px;
    cursor: pointer;
    border: none;
    border-radius: 10px;
    transition: transform 0.2s;
  }

  #rollButton {
    background-color: #4CAF50;
    color: white;
  }

  #rollButton:active {
    transform: scale(0.9);
  }

  #muteButton {
    background-color: #f44336;
    color: white;
  }

  #resultImage {
    width: 300px;
    height: 300px;
    margin: 20px;
    object-fit: cover;
    border-radius: 15px;
  }

  #resultText {
    font-size: 1.5em;
    margin-top: 10px;
  }

  #chanceText, #rarityText {
    margin-top: 5px;
    font-size: 1.2em;
  }

  #currency {
    margin-top: 20px;
    font-size: 1.3em;
  }

  #upgrades {
    margin-top: 20px;
    font-size: 1em;
  }

  #upgrades button {
    margin: 5px;
    padding: 10px;
    font-size: 0.9em;
    border-radius: 5px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>Paweł RNG</h1>

<button id="rollButton">Roll</button>
<br>
<img id="resultImage" src="photo.png" alt="Result">
<div id="resultText">Kliknij Roll</div>
<div id="chanceText"></div>
<div id="rarityText"></div>

<button id="muteButton">Mute/Unmute</button>

<div id="currency">Monety: <span id="coins">0</span></div>

<div id="upgrades">
  <h2>Sklep i ulepszenia</h2>
  <button id="shortenCooldown">Skróć cooldown (50 monet)</button>
  <button id="buyItem">Kup przedmiot (100 monet)</button>
  <div id="inventory">Ekwipunek: brak</div>
</div>

<audio id="backgroundMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
// ---- DANE OBRAZKÓW ----
const images = [
  {src: 'photo.png', text: 'gejmingowy paweł', chance: 1/2, rarity: 'Common', reward: 1},
  {src: 'photo2.png', text: 'paweł prezydent', chance: 1/4, rarity: 'Uncommon', reward: 5},
  {src: 'photo3.png', text: 'pawel w zoltym hoodie', chance: 1/8, rarity: 'Rare', reward: 10},
  {src: 'photo4.png', text: 'funni paweł', chance: 1/16, rarity: 'Epic', reward: 20},
  {src: 'photo5.png', text: 'paweł ok', chance: 1/32, rarity: 'Mythic', reward: 40},
  {src: 'photo6.png', text: 'świąteczny paweł', chance: 1/64, rarity: 'Legendary', reward: 80},
  {src: 'photo7.png', text: 'paweł dostaje backshoty', chance: 1/128, rarity: 'Ultra Legendary', reward: 160},
  {src: 'photo8.png', text: 'paweł komunista', chance: 1/256, rarity: 'Ultra Legendary', reward: 320}
];

// ---- MUZYKA ----
const musicFiles = ['music.mp3', 'music2.mp3', 'music3.mp3', 'music4.mp3', 'music5.mp3'];
const bgMusic = document.getElementById('backgroundMusic');
let musicStarted = false;

// ---- SYSTEM WALUT I EKWIPUNKU ----
let coins = 0;
let inventory = [];
let cooldown = 2000; // 2 sekundy
let lastRoll = 0;

// ---- FUNKCJE ----
function rollRNG() {
  const now = Date.now();
  if (now - lastRoll < cooldown) {
    alert(`Odczekaj jeszcze ${(cooldown - (now - lastRoll))/1000} sekund!`);
    return;
  }
  lastRoll = now;

  // Tworzymy pulę do losowania
  const pool = [];
  images.forEach(img => {
    const entries = Math.floor(img.chance * 256);
    for (let i = 0; i < entries; i++) pool.push(img);
  });

  const selected = pool[Math.floor(Math.random() * pool.length)];

  // Wyświetl obrazek i dane
  document.getElementById('resultImage').src = selected.src;
  document.getElementById('resultText').textContent = selected.text;
  document.getElementById('chanceText').textContent = `Szansa: 1/${1/selected.chance}`;
  document.getElementById('rarityText').textContent = `Rzadkość: ${selected.rarity}`;

  // Dodajemy nagrodę
  coins += selected.reward;
  document.getElementById('coins').textContent = coins;
}

// ---- PRZYCISK ROLL ----
let rollCooldown = false;

// Przycisk Roll
document.getElementById('rollButton').addEventListener('click', () => {
  if (rollCooldown) return;

  rollCooldown = true;

  const btn = document.getElementById('rollButton');
  btn.style.transform = 'scale(0.8)';
  setTimeout(() => btn.style.transform = 'scale(1)', 250);

  rollRNG();

  setTimeout(() => {
    rollCooldown = false;
  }, 2000);
});


// ---- PRZYCISK MUTE ----
document.getElementById('muteButton').addEventListener('click', () => {
  bgMusic.muted = !bgMusic.muted;
});

// ---- LOSOWA MUZYKA ----
function playRandomMusic() {
  const randomMusic = musicFiles[Math.floor(Math.random() * musicFiles.length)];
  bgMusic.src = randomMusic;
  bgMusic.play();
}

// ---- SKLEP / ULEPSZENIA ----
document.getElementById('shortenCooldown').addEventListener('click', () => {
  if (coins >= 50 && cooldown > 500) {
    coins -= 50;
    cooldown -= 500; // skraca cooldown o 0.5s
    document.getElementById('coins').textContent = coins;
    alert(`Cooldown skrócony! Teraz wynosi ${(cooldown/1000).toFixed(1)} sekund`);
  } else if (cooldown <= 500) {
    alert('Cooldown już minimalny!');
  } else {
    alert('Nie masz wystarczająco monet!');
  }
});

document.getElementById('buyItem').addEventListener('click', () => {
  if (coins >= 100) {
    coins -= 100;
    inventory.push('Tajemniczy Przedmiot');
    document.getElementById('coins').textContent = coins;
    document.getElementById('inventory').textContent = `Ekwipunek: ${inventory.join(', ')}`;
    alert('Przedmiot dodany do ekwipunku!');
  } else {
    alert('Nie masz wystarczająco monet!');
  }
});
</script>

</body>
</html>
